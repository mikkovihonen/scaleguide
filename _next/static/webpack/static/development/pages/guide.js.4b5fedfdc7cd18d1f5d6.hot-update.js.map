{"version":3,"file":"static/webpack/static/development/pages/guide.js.4b5fedfdc7cd18d1f5d6.hot-update.js","sources":["webpack:///./pages/guide.js"],"sourcesContent":["import dynamic from 'next/dynamic'\nimport React, { Component } from 'react';\nconst App = dynamic(() => import('../components/App.js'))\nimport PageLayout from '../components/PageLayout.js'\nimport {withRouter} from 'next/router'\nimport { createClient } from 'contentful'\nimport ReactMarkdown from 'react-markdown'\nimport getConfig from 'next/config'\n\nconst {serverRuntimeConfig, publicRuntimeConfig} = getConfig()\n\n/*onSelectorChange = {\n    async function(note, mode, type) {\n        const href = publicRuntimeConfig.assetPrefix + '/guide?note=' + note + '&mode=' + mode + '&type=' + type;\n        await props.router.replace(href, href, {shallow: true});\n    }\n}*/\n\nclass Guide extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            enrichingContent: \"\",\n            note: (props.note !== undefined) ? props.note : \"C\",\n            mode: (props.mode !== undefined) ? props.mode : \"major\",\n            type: (props.type !== undefined) ? props.type : \"triads\",\n            chords: [],\n            degrees: [],\n            scale: []\n        };\n      }\n    \n    render() {\n        var me = this;\n        return (\n            <PageLayout>\n            <App\n                note = { this.state.note }\n                mode = { this.state.mode } \n                type = { this.state.type }\n                onSelectorChange = {\n                    async function(note, mode, type) {\n                        const content = await me.getEnrichingContent(note + \" \" + mode)\n                        me.setState({\n                            note : note,\n                            mode: mode,\n                            type: type,\n                            enrichingContent: (content != undefined ) ? content.fields.additionalInfo : \"\"\n                        });\n                    }\n                }\n            />\n            <ReactMarkdown source={ this.state.enrichingContent } />\n            <div className=\"noPrint\" style={{height: \"210px\"}}>&nbsp;</div>\n       </PageLayout>    \n        )\n    }\n\n    getEnrichingContent = async function(scale) {\n        const client = createClient({ space: 'yjojxeedm8di', accessToken: '6151d3de5d32bc81c224df54a0a61a98dcf9e29114c4d720a7cd245fa767a1f6'});\n        const content = await client.getEntries({\n            'fields.scale': scale,\n            'content_type': 'enrichingContent'\n          })\n          .then(await function (entries) {\n                 return entries.items.shift()\n          })\n        return content\n    }\n}\n            //\n\nexport default withRouter(Guide);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;;;AAOA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuCA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AADA;AAGA;AACA;AAFA;AAFA;AAAA;AAOA;AACA;AACA;AATA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AAFA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAxCA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAFA;AAWA;AACA;;;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AAtCA;AACA;AACA;AAoDA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}